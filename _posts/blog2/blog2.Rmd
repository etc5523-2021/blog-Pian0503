---
title: "COVID-19 in Panama"
description: |
  Analysis of the epidemic stage in Panama.
author:
  - name: Pian Li
date: "`r Sys.Date()`"
output:
  distill::distill_article:
    self_contained: false
    toc: true
    toc_depth: 3
---


```{r setup, echo=FALSE,eval=TRUE,message=FALSE,include=FALSE,warning=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(here)
library(lubridate)
library(DT)
library(kableExtra)
library(plotly)
library(viridis)
library(formattable)
library(hrbrthemes)
library(ggplot2)
library(gganimate)
library(gifski)
library(dygraphs)
library(xts)

```


```{r fig.align = "center"}
library(grid)
library(png)
img <- readPNG(here("images/Flag_of_Panama.png"))
grid.raster(img)
```


```{r read-data}

vac_panama <- read_csv(here("./data/Panama.csv"))
covid_panama <- read_csv(here::here("data/owid-covid-data.csv"))
test_panama <- read_csv(here::here("data/covid-testing-all-observations.csv"))

```


```{r cleandata}

test_p <- test_panama %>%
  filter(Entity == "Panama - tests performed") %>%
  select(Entity,
         Date,
         `Daily change in cumulative total`,
         `Short-term positive rate`) 


cases_p <- covid_panama %>%
  filter(location == "Panama") %>%
  select(location,
         date,
         new_cases,
         total_cases,
         new_deaths,
         total_deaths
         ) %>%
  rename(Date = date)

tidy_case_test <- left_join(cases_p,test_p, by = "Date") %>%
  select(location,
         Date,
         new_cases,
         total_cases,
         new_deaths,
         total_deaths,
         `Daily change in cumulative total`,
         `Short-term positive rate`) %>%
  rename(Country = location,
         New_tests = `Daily change in cumulative total`,
         Positive_rate = `Short-term positive rate`) %>%
  mutate(Date = dmy(Date))

```


# Introduction

The outbreak of COVID-19 has raised concerns about the country's development, due to the lack of treatment experiment and restricted policies. Panama is a country on the isthmus connecting Central and South America. There have been 462,770 infections and 7,152 pandemic-related deaths reported in the country since the pandemic began. This blog aims to explore the COVID-19 situation in Panama and determine the efficiency of vaccinations, by using several pandemic-related data.


# Data description

The dataset contains cases and deaths is obtained from [Our World in Data](https://ourworldindata.org/coronavirus/country/panama), while the vaccination dataset comes from the publicly available [Github repository](https://github.com/owid/covid-19-data/tree/master/public/data/vaccinations) created by [Our World in Data (OWID)](https://ourworldindata.org/).

The following table includes all related variables used for the analysis:

```{r datadictionary}

dict_panama <- data.frame(Variable = c("date",
                                        "location",
                                        "new_cases",
                                        "new_deaths",
                                        "new_tests",
                                        "people_vaccinated",
                                        "people_fully_vaccinated",
                                        "total_vaccinations"),
                          Type = c("date",
                                   "character",
                                   "double",
                                   "double",
                                   "double",
                                   "double",
                                   "double",
                                   "double"),
                          Description = c("date of the observation",
                                          "name of the continent and country",
                                          "new confirmed cases of COVID-19",
                                          "new deaths attributed to COVID-19",
                                          "New tests for COVID-19 (only calculated for consecutive days)",
                                          "total number of people who received at least one vaccine dose",
                                          "total number of people who received all doses prescribed by the vaccination protocol",
                                          "total number of doses administered,each individual dose is counted")) 

kable(dict_panama, caption = "Data Structure of chosen datasets") %>%
  kable_paper("hover", full_width = F)


```


